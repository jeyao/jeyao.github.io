<!DOCTYPE html><html lang="cn"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.969b117ef773e5a03d58.css" id="gatsby-global-css">[class*=ant-]::-ms-clear,[class*=ant-] input::-ms-clear,[class*=ant-] input::-ms-reveal,[class^=ant-]::-ms-clear,[class^=ant-] input::-ms-clear,[class^=ant-] input::-ms-reveal{display:none}[class*=ant-],[class*=ant-] *,[class*=ant-] :after,[class*=ant-] :before,[class^=ant-],[class^=ant-] *,[class^=ant-] :after,[class^=ant-] :before{box-sizing:border-box}body,html{width:100%;height:100%}input::-ms-clear,input::-ms-reveal{display:none}*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-ms-overflow-style:scrollbar;-webkit-tap-highlight-color:rgba(0,0,0,0)}@-ms-viewport{width:device-width}body{margin:0;color:rgba(0,0,0,.85);font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variant:tabular-nums;line-height:1.5715;background-color:#fff;font-feature-settings:"tnum"}[tabindex="-1"]:focus{outline:none!important}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5em;color:rgba(0,0,0,.85);font-weight:500}p{margin-top:0;margin-bottom:1em}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;border-bottom:0;cursor:help}address{margin-bottom:1em;font-style:normal;line-height:inherit}input[type=number],input[type=password],input[type=text],textarea{-webkit-appearance:none}dl,ol,ul{margin-top:0;margin-bottom:1em}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:500}dd{margin-bottom:.5em;margin-left:0}blockquote{margin:0 0 1em}dfn{font-style:italic}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#1890ff;text-decoration:none;background-color:transparent;outline:none;cursor:pointer;transition:color .3s;-webkit-text-decoration-skip:objects}a:hover{color:#40a9ff}a:active{color:#096dd9}a:active,a:focus,a:hover{text-decoration:none;outline:0}a[disabled]{color:rgba(0,0,0,.25);cursor:not-allowed;pointer-events:none}code,kbd,pre,samp{font-size:1em;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace}pre{margin-top:0;margin-bottom:1em;overflow:auto}figure{margin:0 0 1em}img{vertical-align:middle;border-style:none}svg:not(:root){overflow:hidden}[role=button],a,area,button,input:not([type=range]),label,select,summary,textarea{touch-action:manipulation}table{border-collapse:collapse}caption{padding-top:.75em;padding-bottom:.3em;color:rgba(0,0,0,.45);text-align:left;caption-side:bottom}th{text-align:inherit}button,input,optgroup,select,textarea{margin:0;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;margin:0;padding:0;border:0}legend{display:block;width:100%;max-width:100%;margin-bottom:.5em;padding:0;color:inherit;font-size:1.5em;line-height:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item}template{display:none}[hidden]{display:none!important}mark{padding:.2em;background-color:#feffe6}::selection{color:#fff;background:#1890ff}.clearfix:after,.clearfix:before{display:table;content:""}.clearfix:after{clear:both}.anticon{display:inline-block;color:inherit;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-.125em;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.anticon>*{line-height:1}.anticon svg{display:inline-block}.anticon:before{display:none}.anticon .anticon-icon{display:block}.anticon[tabindex]{cursor:pointer}.anticon-spin,.anticon-spin:before{display:inline-block;animation:loadingCircle 1s linear infinite}.ant-fade-appear,.ant-fade-enter,.ant-fade-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-fade-appear.ant-fade-appear-active,.ant-fade-enter.ant-fade-enter-active{animation-name:antFadeIn;animation-play-state:running}.ant-fade-leave.ant-fade-leave-active{animation-name:antFadeOut;animation-play-state:running;pointer-events:none}.ant-fade-appear,.ant-fade-enter{opacity:0;animation-timing-function:linear}.ant-fade-leave{animation-timing-function:linear}@keyframes antFadeIn{0%{opacity:0}to{opacity:1}}@keyframes antFadeOut{0%{opacity:1}to{opacity:0}}.ant-move-up-appear,.ant-move-up-enter,.ant-move-up-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-move-up-appear.ant-move-up-appear-active,.ant-move-up-enter.ant-move-up-enter-active{animation-name:antMoveUpIn;animation-play-state:running}.ant-move-up-leave.ant-move-up-leave-active{animation-name:antMoveUpOut;animation-play-state:running;pointer-events:none}.ant-move-up-appear,.ant-move-up-enter{opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-move-up-leave{animation-timing-function:cubic-bezier(.6,.04,.98,.34)}.ant-move-down-appear,.ant-move-down-enter,.ant-move-down-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-move-down-appear.ant-move-down-appear-active,.ant-move-down-enter.ant-move-down-enter-active{animation-name:antMoveDownIn;animation-play-state:running}.ant-move-down-leave.ant-move-down-leave-active{animation-name:antMoveDownOut;animation-play-state:running;pointer-events:none}.ant-move-down-appear,.ant-move-down-enter{opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-move-down-leave{animation-timing-function:cubic-bezier(.6,.04,.98,.34)}.ant-move-left-appear,.ant-move-left-enter,.ant-move-left-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-move-left-appear.ant-move-left-appear-active,.ant-move-left-enter.ant-move-left-enter-active{animation-name:antMoveLeftIn;animation-play-state:running}.ant-move-left-leave.ant-move-left-leave-active{animation-name:antMoveLeftOut;animation-play-state:running;pointer-events:none}.ant-move-left-appear,.ant-move-left-enter{opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-move-left-leave{animation-timing-function:cubic-bezier(.6,.04,.98,.34)}.ant-move-right-appear,.ant-move-right-enter,.ant-move-right-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-move-right-appear.ant-move-right-appear-active,.ant-move-right-enter.ant-move-right-enter-active{animation-name:antMoveRightIn;animation-play-state:running}.ant-move-right-leave.ant-move-right-leave-active{animation-name:antMoveRightOut;animation-play-state:running;pointer-events:none}.ant-move-right-appear,.ant-move-right-enter{opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-move-right-leave{animation-timing-function:cubic-bezier(.6,.04,.98,.34)}@keyframes antMoveDownIn{0%{transform:translateY(100%);transform-origin:0 0;opacity:0}to{transform:translateY(0);transform-origin:0 0;opacity:1}}@keyframes antMoveDownOut{0%{transform:translateY(0);transform-origin:0 0;opacity:1}to{transform:translateY(100%);transform-origin:0 0;opacity:0}}@keyframes antMoveLeftIn{0%{transform:translateX(-100%);transform-origin:0 0;opacity:0}to{transform:translateX(0);transform-origin:0 0;opacity:1}}@keyframes antMoveLeftOut{0%{transform:translateX(0);transform-origin:0 0;opacity:1}to{transform:translateX(-100%);transform-origin:0 0;opacity:0}}@keyframes antMoveRightIn{0%{transform:translateX(100%);transform-origin:0 0;opacity:0}to{transform:translateX(0);transform-origin:0 0;opacity:1}}@keyframes antMoveRightOut{0%{transform:translateX(0);transform-origin:0 0;opacity:1}to{transform:translateX(100%);transform-origin:0 0;opacity:0}}@keyframes antMoveUpIn{0%{transform:translateY(-100%);transform-origin:0 0;opacity:0}to{transform:translateY(0);transform-origin:0 0;opacity:1}}@keyframes antMoveUpOut{0%{transform:translateY(0);transform-origin:0 0;opacity:1}to{transform:translateY(-100%);transform-origin:0 0;opacity:0}}@keyframes loadingCircle{to{transform:rotate(1turn)}}[ant-click-animating-without-extra-node=true],[ant-click-animating=true]{position:relative}html{--antd-wave-shadow-color:#1890ff;--scroll-bar:0}.ant-click-animating-node,[ant-click-animating-without-extra-node=true]:after{position:absolute;top:0;right:0;bottom:0;left:0;display:block;border-radius:inherit;box-shadow:0 0 0 0 #1890ff;box-shadow:0 0 0 0 var(--antd-wave-shadow-color);opacity:.2;animation:fadeEffect 2s cubic-bezier(.08,.82,.17,1),waveEffect .4s cubic-bezier(.08,.82,.17,1);animation-fill-mode:forwards;content:"";pointer-events:none}@keyframes waveEffect{to{box-shadow:0 0 0 #1890ff;box-shadow:0 0 0 6px var(--antd-wave-shadow-color)}}@keyframes fadeEffect{to{opacity:0}}.ant-slide-up-appear,.ant-slide-up-enter,.ant-slide-up-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-slide-up-appear.ant-slide-up-appear-active,.ant-slide-up-enter.ant-slide-up-enter-active{animation-name:antSlideUpIn;animation-play-state:running}.ant-slide-up-leave.ant-slide-up-leave-active{animation-name:antSlideUpOut;animation-play-state:running;pointer-events:none}.ant-slide-up-appear,.ant-slide-up-enter{opacity:0;animation-timing-function:cubic-bezier(.23,1,.32,1)}.ant-slide-up-leave{animation-timing-function:cubic-bezier(.755,.05,.855,.06)}.ant-slide-down-appear,.ant-slide-down-enter,.ant-slide-down-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-slide-down-appear.ant-slide-down-appear-active,.ant-slide-down-enter.ant-slide-down-enter-active{animation-name:antSlideDownIn;animation-play-state:running}.ant-slide-down-leave.ant-slide-down-leave-active{animation-name:antSlideDownOut;animation-play-state:running;pointer-events:none}.ant-slide-down-appear,.ant-slide-down-enter{opacity:0;animation-timing-function:cubic-bezier(.23,1,.32,1)}.ant-slide-down-leave{animation-timing-function:cubic-bezier(.755,.05,.855,.06)}.ant-slide-left-appear,.ant-slide-left-enter,.ant-slide-left-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-slide-left-appear.ant-slide-left-appear-active,.ant-slide-left-enter.ant-slide-left-enter-active{animation-name:antSlideLeftIn;animation-play-state:running}.ant-slide-left-leave.ant-slide-left-leave-active{animation-name:antSlideLeftOut;animation-play-state:running;pointer-events:none}.ant-slide-left-appear,.ant-slide-left-enter{opacity:0;animation-timing-function:cubic-bezier(.23,1,.32,1)}.ant-slide-left-leave{animation-timing-function:cubic-bezier(.755,.05,.855,.06)}.ant-slide-right-appear,.ant-slide-right-enter,.ant-slide-right-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-slide-right-appear.ant-slide-right-appear-active,.ant-slide-right-enter.ant-slide-right-enter-active{animation-name:antSlideRightIn;animation-play-state:running}.ant-slide-right-leave.ant-slide-right-leave-active{animation-name:antSlideRightOut;animation-play-state:running;pointer-events:none}.ant-slide-right-appear,.ant-slide-right-enter{opacity:0;animation-timing-function:cubic-bezier(.23,1,.32,1)}.ant-slide-right-leave{animation-timing-function:cubic-bezier(.755,.05,.855,.06)}@keyframes antSlideUpIn{0%{transform:scaleY(.8);transform-origin:0 0;opacity:0}to{transform:scaleY(1);transform-origin:0 0;opacity:1}}@keyframes antSlideUpOut{0%{transform:scaleY(1);transform-origin:0 0;opacity:1}to{transform:scaleY(.8);transform-origin:0 0;opacity:0}}@keyframes antSlideDownIn{0%{transform:scaleY(.8);transform-origin:100% 100%;opacity:0}to{transform:scaleY(1);transform-origin:100% 100%;opacity:1}}@keyframes antSlideDownOut{0%{transform:scaleY(1);transform-origin:100% 100%;opacity:1}to{transform:scaleY(.8);transform-origin:100% 100%;opacity:0}}@keyframes antSlideLeftIn{0%{transform:scaleX(.8);transform-origin:0 0;opacity:0}to{transform:scaleX(1);transform-origin:0 0;opacity:1}}@keyframes antSlideLeftOut{0%{transform:scaleX(1);transform-origin:0 0;opacity:1}to{transform:scaleX(.8);transform-origin:0 0;opacity:0}}@keyframes antSlideRightIn{0%{transform:scaleX(.8);transform-origin:100% 0;opacity:0}to{transform:scaleX(1);transform-origin:100% 0;opacity:1}}@keyframes antSlideRightOut{0%{transform:scaleX(1);transform-origin:100% 0;opacity:1}to{transform:scaleX(.8);transform-origin:100% 0;opacity:0}}.ant-zoom-appear,.ant-zoom-enter,.ant-zoom-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-appear.ant-zoom-appear-active,.ant-zoom-enter.ant-zoom-enter-active{animation-name:antZoomIn;animation-play-state:running}.ant-zoom-leave.ant-zoom-leave-active{animation-name:antZoomOut;animation-play-state:running;pointer-events:none}.ant-zoom-appear,.ant-zoom-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-appear-prepare,.ant-zoom-enter-prepare{transform:none}.ant-zoom-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-big-appear,.ant-zoom-big-enter,.ant-zoom-big-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-big-appear.ant-zoom-big-appear-active,.ant-zoom-big-enter.ant-zoom-big-enter-active{animation-name:antZoomBigIn;animation-play-state:running}.ant-zoom-big-leave.ant-zoom-big-leave-active{animation-name:antZoomBigOut;animation-play-state:running;pointer-events:none}.ant-zoom-big-appear,.ant-zoom-big-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-big-appear-prepare,.ant-zoom-big-enter-prepare{transform:none}.ant-zoom-big-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-big-fast-appear,.ant-zoom-big-fast-enter,.ant-zoom-big-fast-leave{animation-duration:.1s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-big-fast-appear.ant-zoom-big-fast-appear-active,.ant-zoom-big-fast-enter.ant-zoom-big-fast-enter-active{animation-name:antZoomBigIn;animation-play-state:running}.ant-zoom-big-fast-leave.ant-zoom-big-fast-leave-active{animation-name:antZoomBigOut;animation-play-state:running;pointer-events:none}.ant-zoom-big-fast-appear,.ant-zoom-big-fast-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-big-fast-appear-prepare,.ant-zoom-big-fast-enter-prepare{transform:none}.ant-zoom-big-fast-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-up-appear,.ant-zoom-up-enter,.ant-zoom-up-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-up-appear.ant-zoom-up-appear-active,.ant-zoom-up-enter.ant-zoom-up-enter-active{animation-name:antZoomUpIn;animation-play-state:running}.ant-zoom-up-leave.ant-zoom-up-leave-active{animation-name:antZoomUpOut;animation-play-state:running;pointer-events:none}.ant-zoom-up-appear,.ant-zoom-up-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-up-appear-prepare,.ant-zoom-up-enter-prepare{transform:none}.ant-zoom-up-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-down-appear,.ant-zoom-down-enter,.ant-zoom-down-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-down-appear.ant-zoom-down-appear-active,.ant-zoom-down-enter.ant-zoom-down-enter-active{animation-name:antZoomDownIn;animation-play-state:running}.ant-zoom-down-leave.ant-zoom-down-leave-active{animation-name:antZoomDownOut;animation-play-state:running;pointer-events:none}.ant-zoom-down-appear,.ant-zoom-down-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-down-appear-prepare,.ant-zoom-down-enter-prepare{transform:none}.ant-zoom-down-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-left-appear,.ant-zoom-left-enter,.ant-zoom-left-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-left-appear.ant-zoom-left-appear-active,.ant-zoom-left-enter.ant-zoom-left-enter-active{animation-name:antZoomLeftIn;animation-play-state:running}.ant-zoom-left-leave.ant-zoom-left-leave-active{animation-name:antZoomLeftOut;animation-play-state:running;pointer-events:none}.ant-zoom-left-appear,.ant-zoom-left-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-left-appear-prepare,.ant-zoom-left-enter-prepare{transform:none}.ant-zoom-left-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}.ant-zoom-right-appear,.ant-zoom-right-enter,.ant-zoom-right-leave{animation-duration:.2s;animation-fill-mode:both;animation-play-state:paused}.ant-zoom-right-appear.ant-zoom-right-appear-active,.ant-zoom-right-enter.ant-zoom-right-enter-active{animation-name:antZoomRightIn;animation-play-state:running}.ant-zoom-right-leave.ant-zoom-right-leave-active{animation-name:antZoomRightOut;animation-play-state:running;pointer-events:none}.ant-zoom-right-appear,.ant-zoom-right-enter{transform:scale(0);opacity:0;animation-timing-function:cubic-bezier(.08,.82,.17,1)}.ant-zoom-right-appear-prepare,.ant-zoom-right-enter-prepare{transform:none}.ant-zoom-right-leave{animation-timing-function:cubic-bezier(.78,.14,.15,.86)}@keyframes antZoomIn{0%{transform:scale(.2);opacity:0}to{transform:scale(1);opacity:1}}@keyframes antZoomOut{0%{transform:scale(1)}to{transform:scale(.2);opacity:0}}@keyframes antZoomBigIn{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes antZoomBigOut{0%{transform:scale(1)}to{transform:scale(.8);opacity:0}}@keyframes antZoomUpIn{0%{transform:scale(.8);transform-origin:50% 0;opacity:0}to{transform:scale(1);transform-origin:50% 0}}@keyframes antZoomUpOut{0%{transform:scale(1);transform-origin:50% 0}to{transform:scale(.8);transform-origin:50% 0;opacity:0}}@keyframes antZoomLeftIn{0%{transform:scale(.8);transform-origin:0 50%;opacity:0}to{transform:scale(1);transform-origin:0 50%}}@keyframes antZoomLeftOut{0%{transform:scale(1);transform-origin:0 50%}to{transform:scale(.8);transform-origin:0 50%;opacity:0}}@keyframes antZoomRightIn{0%{transform:scale(.8);transform-origin:100% 50%;opacity:0}to{transform:scale(1);transform-origin:100% 50%}}@keyframes antZoomRightOut{0%{transform:scale(1);transform-origin:100% 50%}to{transform:scale(.8);transform-origin:100% 50%;opacity:0}}@keyframes antZoomDownIn{0%{transform:scale(.8);transform-origin:50% 100%;opacity:0}to{transform:scale(1);transform-origin:50% 100%}}@keyframes antZoomDownOut{0%{transform:scale(1);transform-origin:50% 100%}to{transform:scale(.8);transform-origin:50% 100%;opacity:0}}.ant-motion-collapse-legacy{overflow:hidden}.ant-motion-collapse,.ant-motion-collapse-legacy-active{transition:height .2s cubic-bezier(.645,.045,.355,1),opacity .2s cubic-bezier(.645,.045,.355,1)!important}.ant-motion-collapse{overflow:hidden}.ant-tag{box-sizing:border-box;font-size:14px;font-variant:tabular-nums;line-height:1.5715;list-style:none;font-feature-settings:"tnum";display:inline-block;height:auto;margin:0 8px 0 0;padding:0 7px;font-size:12px;line-height:20px;white-space:nowrap;background:#fafafa;border:1px solid #d9d9d9;border-radius:2px;opacity:1;transition:all .3s}.ant-tag,.ant-tag a,.ant-tag a:hover{color:rgba(0,0,0,.85)}.ant-tag>a:first-child:last-child{display:inline-block;margin:0 -8px;padding:0 8px}.ant-tag-close-icon{margin-left:3px;color:rgba(0,0,0,.45);font-size:10px;cursor:pointer;transition:all .3s}.ant-tag-close-icon:hover{color:rgba(0,0,0,.85)}.ant-tag-has-color{border-color:transparent}.ant-tag-has-color,.ant-tag-has-color .anticon-close,.ant-tag-has-color .anticon-close:hover,.ant-tag-has-color a,.ant-tag-has-color a:hover{color:#fff}.ant-tag-checkable{background-color:transparent;border-color:transparent;cursor:pointer}.ant-tag-checkable:not(.ant-tag-checkable-checked):hover{color:#1890ff}.ant-tag-checkable-checked,.ant-tag-checkable:active{color:#fff}.ant-tag-checkable-checked{background-color:#1890ff}.ant-tag-checkable:active{background-color:#096dd9}.ant-tag-hidden{display:none}.ant-tag-pink{color:#c41d7f;background:#fff0f6;border-color:#ffadd2}.ant-tag-pink-inverse{color:#fff;background:#eb2f96;border-color:#eb2f96}.ant-tag-magenta{color:#c41d7f;background:#fff0f6;border-color:#ffadd2}.ant-tag-magenta-inverse{color:#fff;background:#eb2f96;border-color:#eb2f96}.ant-tag-red{color:#cf1322;background:#fff1f0;border-color:#ffa39e}.ant-tag-red-inverse{color:#fff;background:#f5222d;border-color:#f5222d}.ant-tag-volcano{color:#d4380d;background:#fff2e8;border-color:#ffbb96}.ant-tag-volcano-inverse{color:#fff;background:#fa541c;border-color:#fa541c}.ant-tag-orange{color:#d46b08;background:#fff7e6;border-color:#ffd591}.ant-tag-orange-inverse{color:#fff;background:#fa8c16;border-color:#fa8c16}.ant-tag-yellow{color:#d4b106;background:#feffe6;border-color:#fffb8f}.ant-tag-yellow-inverse{color:#fff;background:#fadb14;border-color:#fadb14}.ant-tag-gold{color:#d48806;background:#fffbe6;border-color:#ffe58f}.ant-tag-gold-inverse{color:#fff;background:#faad14;border-color:#faad14}.ant-tag-cyan{color:#08979c;background:#e6fffb;border-color:#87e8de}.ant-tag-cyan-inverse{color:#fff;background:#13c2c2;border-color:#13c2c2}.ant-tag-lime{color:#7cb305;background:#fcffe6;border-color:#eaff8f}.ant-tag-lime-inverse{color:#fff;background:#a0d911;border-color:#a0d911}.ant-tag-green{color:#389e0d;background:#f6ffed;border-color:#b7eb8f}.ant-tag-green-inverse{color:#fff;background:#52c41a;border-color:#52c41a}.ant-tag-blue{color:#096dd9;background:#e6f7ff;border-color:#91d5ff}.ant-tag-blue-inverse{color:#fff;background:#1890ff;border-color:#1890ff}.ant-tag-geekblue{color:#1d39c4;background:#f0f5ff;border-color:#adc6ff}.ant-tag-geekblue-inverse{color:#fff;background:#2f54eb;border-color:#2f54eb}.ant-tag-purple{color:#531dab;background:#f9f0ff;border-color:#d3adf7}.ant-tag-purple-inverse{color:#fff;background:#722ed1;border-color:#722ed1}.ant-tag-success{color:#52c41a;background:#f6ffed;border-color:#b7eb8f}.ant-tag-processing{color:#1890ff;background:#e6f7ff;border-color:#91d5ff}.ant-tag-error{color:#f5222d;background:#fff1f0;border-color:#ffa39e}.ant-tag-warning{color:#fa8c16;background:#fff7e6;border-color:#ffd591}.ant-tag>.anticon+span,.ant-tag>span+.anticon{margin-left:7px}.ant-tag.ant-tag-rtl{margin-right:0;margin-left:8px;direction:rtl;text-align:right}.ant-tag-rtl .ant-tag-close-icon{margin-right:3px;margin-left:0}.ant-tag-rtl.ant-tag>.anticon+span,.ant-tag-rtl.ant-tag>span+.anticon{margin-right:7px;margin-left:0}</style><meta name="generator" content="Gatsby 3.2.1"/><link rel="icon" href="/favicon-32x32.png?v=7dec741ad1844b7121840c798198084f" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=7dec741ad1844b7121840c798198084f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=7dec741ad1844b7121840c798198084f"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">执行机制 | Jeyao Docs</title><meta data-react-helmet="true" name="description" content="Out of the box Gatsby Theme for creating documentation websites easily and quickly"/><meta data-react-helmet="true" name="image" content="https://jeyao.github.io/banner.png"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="IE=edge,chrome=1"/><meta data-react-helmet="true" name="MobileOptimized" content="320"/><meta data-react-helmet="true" name="HandheldFriendly" content="True"/><meta data-react-helmet="true" name="google" content="notranslate"/><meta data-react-helmet="true" name="referrer" content="no-referrer-when-downgrade"/><meta data-react-helmet="true" property="og:url" content="https://jeyao.github.io/javascript/3.2.2/"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="执行机制 | Jeyao Docs"/><meta data-react-helmet="true" property="og:description" content="Out of the box Gatsby Theme for creating documentation websites easily and quickly"/><meta data-react-helmet="true" property="og:locale" content="cn"/><meta data-react-helmet="true" property="og:site_name" content="Jeyao Docs"/><meta data-react-helmet="true" property="og:image" content="https://jeyao.github.io/banner.png"/><meta data-react-helmet="true" property="og:image:secure_url" content="https://jeyao.github.io/banner.png"/><meta data-react-helmet="true" property="og:image:alt" content="Banner"/><meta data-react-helmet="true" property="og:image:type" content="image/png"/><meta data-react-helmet="true" property="og:image:width" content="1200"/><meta data-react-helmet="true" property="og:image:height" content="630"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="执行机制 | Jeyao Docs"/><meta data-react-helmet="true" name="twitter:site" content="jeyao"/><meta data-react-helmet="true" name="twitter:creator" content="jeyao"/><meta data-react-helmet="true" name="twitter:image" content="https://jeyao.github.io/banner.png"/><meta data-react-helmet="true" name="twitter:image:src" content="https://jeyao.github.io/banner.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Banner"/><meta data-react-helmet="true" name="twitter:image:width" content="1200"/><meta data-react-helmet="true" name="twitter:image:height" content="630"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://jeyao.github.io/javascript/3.2.2/","name":"执行机制","alternateName":"Jeyao Docs"}]</script><link rel="canonical" href="https://rocketdocs.netlify.app/javascript/3.2.2" data-baseprotocol="https:" data-basehost="rocketdocs.netlify.app"/><link as="script" rel="preload" href="/webpack-runtime-f9dca12a9ff602ea9ded.js"/><link as="script" rel="preload" href="/framework-c1a99f3506abef01adf7.js"/><link as="script" rel="preload" href="/f0e45107-dddf2e792ec5c6c002bc.js"/><link as="script" rel="preload" href="/app-3153cd67d4679d599a55.js"/><link as="script" rel="preload" href="/545f34e4-9f9d949bc827879538f9.js"/><link as="script" rel="preload" href="/5e2a4920-916101dd0dfe523ee6cd.js"/><link as="script" rel="preload" href="/252f366e-88caabdff774f0c0c5b6.js"/><link as="script" rel="preload" href="/64753c22875cf8b50a9c00a4cbb49dfbc7a8c3a5-0ab51f5a35b269095259.js"/><link as="script" rel="preload" href="/component---src-rocketseat-gatsby-theme-docs-src-templates-docs-query-js-9e19f2e69b8483d46188.js"/><link as="fetch" rel="preload" href="/page-data/javascript/3.2.2/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1954253342.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2328931024.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2501019404.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/973074209.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><style data-emotion="css-global h0mdsf">*,*::after,*::before{margin:0;padding:0;box-sizing:border-box;}body{font-size:16px;font-family:'Hiragino Sans GB',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background-color:#FFFFFF;text-rendering:optimizelegibility;-webkit-font-smoothing:antialiased;overflow-y:scroll;}h1{font-size:32px;color:#3D3D4D;font-weight:bold;margin-bottom:24px;}h2{font-size:24px;}h3{font-size:18px;}h4{font-size:16px;}h2,h3,h4,h5,h6{color:#3D3D4D;margin:24px 0 16px 0;font-weight:bold;}p{color:#6C6C80;font-size:16px;line-height:28px;margin-bottom:16px;font-weight:400;}code.inline-code{display:inline-block;vertical-align:middle;line-height:1;padding:0.2em;background-color:#fff2e8;color:#1f1f1f;font-size:14px;border-radius:3px;font-feature-settings:'clig' 0,'calt' 0;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;}h1 code.inline-code,h2 code.inline-code{font-size:calc(100% - 5px);padding:4px;}a{color:#6C6C80;font-weight:bold;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}blockquote{margin-bottom:16px;width:100%;}blockquote p{padding:1rem;border-radius:5px;background:#feebc8;color:#2d3748;margin:0;}blockquote p a{color:#2d3748;}hr{border:0;height:0;border-top:1px solid rgba(0, 0, 0, 0.1);border-bottom:1px solid rgba(255, 255, 255, 0.3);}table{border-collapse:separate;border-spacing:0 4px;margin-top:-4px;margin-bottom:16px;width:100%;}table th,table td{margin:0;color:#6C6C80;background-color:#F2F2FA;border:solid 1px #F2F2FA;border-style:solid none;padding:12px;}table th:first-of-type,table td:first-of-type{border-left-style:solid;border-top-left-radius:5px;border-bottom-left-radius:5px;}table th:last-child,table td:last-child{border-right-style:solid;border-bottom-right-radius:5px;border-top-right-radius:5px;}table tr th{color:#3D3D4D;text-align:left;font-weight:bold;}iframe{margin-bottom:16px;}img{max-width:100%;}ul,ol{color:#6C6C80;padding-left:15px;margin-bottom:16px;}ul li,ol li{line-height:28px;}li ul,li ol{margin-bottom:0;}.gatsby-highlight{font-family:Hack,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;position:relative;z-index:0;margin:0 0 16px 0;overflow:auto;}.gatsby-highlight .token{font-style:normal!important;}pre[class*='language-'] code{font-family:inherit;}pre[class*='language-']::before{background:#d9d7e0;border-radius:0 0 4px 4px;color:#232129;font-size:12px;font-family:inherit;letter-spacing:0.075em;line-height:1;padding:0.25rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}pre[class~='language-js']::before,pre[class~='language-javascript']::before{content:'js';background:#f7df1e;}pre[class~='language-jsx']::before{content:'jsx';background:#61dafb;}pre[class~='language-typescript']::before,pre[class~='language-ts']::before{content:'ts';background:#294e80;color:#fff;}pre[class~='language-tsx']::before{content:'tsx';background:#294e80;color:#fff;}pre[class~='language-graphql']::before{content:'GraphQL';background:#e10098;color:#fff;}pre[class~='language-html']::before{content:'html';background:#005a9c;color:#fff;}pre[class~='language-css']::before{content:'css';background:#ff9800;color:#fff;}pre[class~='language-mdx']::before{content:'mdx';background:#f9ac00;color:#fff;}pre[class~='language-shell']::before{content:'shell';}pre[class~='language-sh']::before{content:'sh';}pre[class~='language-bash']::before{content:'bash';}pre[class~='language-yaml']::before,pre[class~='language-yml']::before{content:'yaml';background:#ffa8df;}pre[class~='language-markdown']::before{content:'md';}pre[class~='language-json']::before,pre[class~='language-json5']::before{content:'json';background:linen;}pre[class~='language-diff']::before{content:'diff';background:#e6ffed;}pre[class~='language-text']::before{content:'text';background:#fff;}pre[class~='language-flow']::before{content:'flow';background:#e8bd36;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css d43d92">.css-d43d92::after{content:'';position:fixed;width:100%;height:100%;left:0;right:0;bottom:0;background-color:rgba(0, 0, 0, 0.8);z-index:999;display:none;}</style><div aria-label="Close menu" class="css-d43d92"></div><style data-emotion="css 1kjnnqm">.css-1kjnnqm{width:100%;max-width:1400px;margin:0 auto;padding:0 24px;display:grid;grid-template-columns:280px calc(100% - 320px);grid-auto-flow:row;grid-gap:40px;}@media (max-width: 780px){.css-1kjnnqm{padding:24px;grid-template-columns:100%;}}</style><div class="css-1kjnnqm e1htbcji2"><style data-emotion="css 9tjo13">.css-9tjo13{width:100%;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;padding-top:36px;-webkit-transition:-webkit-transform 0.5s;transition:transform 0.5s;height:calc(100vh - 1px);}.css-9tjo13 nav{width:100%;padding-top:24px;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;-webkit-flex:1;-ms-flex:1;flex:1;}@media (max-width: 780px){.css-9tjo13{max-width:75%;min-width:auto;z-index:1001;position:fixed;top:0;bottom:0;left:0;padding-top:32px;background:#FFFFFF;-webkit-transform:translate3d(
      -100%,
      0,
      0
    );-moz-transform:translate3d(
      -100%,
      0,
      0
    );-ms-transform:translate3d(
      -100%,
      0,
      0
    );transform:translate3d(
      -100%,
      0,
      0
    );}}</style><aside class="css-9tjo13 e1m7qv9h5"><style data-emotion="css 2yrou">.css-2yrou{width:100%;}.css-2yrou a{width:100%;padding-left:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-2yrou e1m7qv9h4"><a aria-label="Go to home page" href="/"><svg width="38" height="38" viewBox="0 0 1024 1024" style="border-radius:50%;border:2px solid #000" aria-hidden="true"><path d="M689.12 613.632l-30.336 10.24 30.336-10.24z m47.104 318.08a32 32 0 1 0 63.552-7.424l-63.552 7.424zM65.056 744.32a32 32 0 1 0 61.888 16.224l-61.888-16.224zM287.648 204.544l25.952 18.688-25.92-18.688z m12-9.792l-14.464-28.544 14.464 28.544z m182.208-77.984l-10.24-30.336 10.24 30.336z m285.344 61.504l7.488 31.104-7.488-31.104z m79.488-21.216l-9.024-30.72 9.024 30.72z m56.32 21.44l-28.96 13.664 28.928-13.664z m-0.064 176.096l20.128 24.864-20.16-24.864z m-165.28 117.856l17.6 26.752-17.6-26.752zM591.712 121.312l19.52-25.376-19.52 25.376z m-33.472 524.064a32 32 0 0 0 35.52 53.248l-35.52-53.248zM256 336a32 32 0 0 0-64 0h64z m402.784 287.872c28.256 83.744 65.856 208.48 77.44 307.84l63.552-7.424c-12.384-106.496-51.936-236.672-80.32-320.896l-60.672 20.48z m-531.84 136.672C234.88 349.44 299.52 242.88 313.6 223.264l-51.904-37.44c-21.568 29.92-88.512 146.56-196.64 558.496l61.888 16.224z m187.2-537.28c23.424-11.872 101.76-50.528 177.92-76.16L471.616 86.4c-80.672 27.2-162.368 67.552-186.432 79.776l28.928 57.056z m460.544-13.888a1709.984 1709.984 0 0 0 81.024-21.6l-18.048-61.44c-19.776 5.824-46.656 13.28-77.952 20.8l14.976 62.24z m99.36-17.216c11.968 25.376 20.544 57.344 21.792 85.568 1.344 30.144-5.792 46.144-13.056 52l40.288 49.728c31.808-25.728 38.304-68.992 36.704-104.576-1.664-37.536-12.608-77.76-27.84-110.08l-57.92 27.36z m8.736 137.568c-33.312 26.976-94.272 71.008-162.688 116l35.168 53.472c69.376-45.632 132.224-90.944 167.808-119.744l-40.288-49.728z m-390.72-182.656c26.656-8.96 38.4-13.28 49.024-13.728 6.816-0.32 15.04 0.96 31.104 13.312l39.04-50.72c-24.128-18.56-46.784-27.648-72.864-26.56-22.24 0.96-45.376 9.856-66.752 17.056l20.48 60.64z m363.648 40.704a21.76 21.76 0 0 1 13.024-0.064c2.88 1.024 4.416 2.56 5.312 4.448l57.856-27.328c-18.4-39.008-61.664-48.032-94.24-38.464l18.048 61.408z m-136.288 415.616a90.56 90.56 0 0 1 35.84-104.192l-35.168-53.472a154.56 154.56 0 0 0-61.312 178.144l60.64-20.48zM572.192 146.656c23.616 18.176 57.664 36.992 92.8 49.792 33.984 12.384 74.848 21.312 109.696 12.928l-14.976-62.24c-16.128 3.904-42.24 0.32-72.832-10.816-29.504-10.752-57.696-26.56-75.648-40.384l-39.04 50.72z m-258.56 76.576c-0.384 0.512-0.64 0.736-0.64 0.704a7.264 7.264 0 0 1 1.12-0.64l-28.928-57.088a64.544 64.544 0 0 0-23.488 19.616L313.6 223.264z m280.128 475.392c46.688-31.136 105.888-69.248 125.28-146.88l-62.08-15.52c-12.608 50.4-49.408 76.256-98.72 109.152l35.52 53.248zM416 528a80 80 0 0 1-80 80v64a144 144 0 0 0 144-144h-64zM336 608A80 80 0 0 1 256 528H192a144 144 0 0 0 144 144v-64z m144-80c0-52.224-3.552-140-25.792-215.68-11.104-37.76-27.584-75.136-52.8-103.552C375.424 179.424 340.256 160 295.296 160v64c24.224 0 42.72 9.696 58.304 27.232 16.384 18.528 29.44 45.824 39.232 79.168 19.552 66.56 23.2 146.816 23.2 197.6h64z m-224 0v-192H192v192h64z" fill="#000000" p-id="1325"></path></svg><span style="font-weight:bolder;font-family:&#x27;Shadows Into Light&#x27;, serif;font-size:30px;line-height:38px;margin-left:20px;letter-spacing:3px;color:#000">Jeyao</span></a></div><nav><style data-emotion="css qmhqz9">.css-qmhqz9{list-style:none;width:100%;padding-left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><ul class="css-qmhqz9 e1m7qv9h3"><style data-emotion="css 1sei680">.css-1sei680{font-size:15px;width:100%;-webkit-transition:all 200ms ease-in-out;transition:all 200ms ease-in-out;padding:0 20px;cursor:pointer;}.css-1sei680 a,.css-1sei680 span{display:block;font-size:15px;color:#6C6C80;background-color:#FFFFFF;padding:4px 10px;margin:4px 0;border-radius:4px;font-weight:normal;-webkit-text-decoration:none;text-decoration:none;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;margin:0 auto;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;}.css-1sei680 a svg,.css-1sei680 span svg{width:20px;height:20px;margin-right:10px;}.css-1sei680 a:not(.active-link):hover,.css-1sei680 span:not(.active-link):hover{color:#1f3696;}.css-1sei680 a.active-link,.css-1sei680 span.active-link{color:#1f3696;background-color:#F2F2FA;}@media (max-width: 780px){.css-1sei680 a.active-link,.css-1sei680 span.active-link{background:#F2F2FA;}}</style><li class="css-1sei680 e1m7qv9h1"><a href="/">Introduction</a></li><li class="css-1sei680 e1m7qv9h1"><a href="/getting-started">Getting started</a></li><style data-emotion="css mximbs">.css-mximbs{padding-left:30px;width:100%;text-transform:uppercase;font-size:14px;font-weight:bold;margin-top:20px;color:#3D3D4D;letter-spacing:0.142em;}</style><li class="css-mximbs e1m7qv9h2">JavaScript</li><style data-emotion="css 1cgn8l4">.css-1cgn8l4{list-style:none;width:100%;padding-left:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:5px 0 0 0;}</style><ul class="css-1cgn8l4 e1m7qv9h0"><li class="css-1sei680 e1m7qv9h1"><a aria-current="page" class="active-link" href="/javascript/3.2.2">执行机制</a></li></ul><li class="css-mximbs e1m7qv9h2">Network</li><ul class="css-1cgn8l4 e1m7qv9h0"><li class="css-1sei680 e1m7qv9h1"><a href="/network/http">HTTP</a></li></ul><li class="css-mximbs e1m7qv9h2">Usage</li><ul class="css-1cgn8l4 e1m7qv9h0"><li class="css-1sei680 e1m7qv9h1"><a href="/usage/creating-docs">Creating docs</a></li><li class="css-1sei680 e1m7qv9h1"><a href="/usage/navigation">Navigation</a></li><li class="css-1sei680 e1m7qv9h1"><a href="/usage/shadowing">Shadowing</a></li></ul><li class="css-mximbs e1m7qv9h2">FAQ</li><ul class="css-1cgn8l4 e1m7qv9h0"><li class="css-1sei680 e1m7qv9h1"><a href="/faq/component">博客组件</a></li></ul><li class="css-mximbs e1m7qv9h2">More</li><ul class="css-1cgn8l4 e1m7qv9h0"><li class="css-1sei680 e1m7qv9h1"><a href="/faq">FAQ</a></li><li class="css-1sei680 e1m7qv9h1"><a href="https://github.com/jeyao" rel="noopener noreferrer">Github<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;margin-left:10px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li><li class="css-1sei680 e1m7qv9h1"><a href="https://www.yuque.com/yaoqianshu-n5qp5" rel="noopener noreferrer">语雀<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px;margin-left:10px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a></li></ul></ul></nav></aside><style data-emotion="css u8hwp7">.css-u8hwp7{height:100%;padding-top:36px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;position:relative;}@media (max-width: 1200px){.css-u8hwp7{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media (max-width: 780px){.css-u8hwp7{padding-top:0;}}</style><main class="css-u8hwp7 e1htbcji1"><style data-emotion="css 1p24zom">.css-1p24zom{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;margin-bottom:24px;}.css-1p24zom h2{margin:0;border:none;padding:0;font-size:18px;}@media (max-width: 359px){.css-1p24zom h2{font-size:14px;}}.css-1p24zom button{border:none;background:none;cursor:pointer;margin-right:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (min-width: 780px){.css-1p24zom{display:none;}}</style><header class="css-1p24zom e1257wvt0"><button aria-label="Open sidebar" type="button"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" aria-hidden="true" height="23" width="23" xmlns="http://www.w3.org/2000/svg"><path d="M32 96v64h448V96H32zm0 128v64h448v-64H32zm0 128v64h448v-64H32z"></path></svg></button><h2>Jeyao Docs</h2></header><style data-emotion="css 1j7nlw4">.css-1j7nlw4{display:none;}@media (max-width: 1200px){.css-1j7nlw4{display:block;}}</style><h1 class="css-1j7nlw4">执行机制</h1><style data-emotion="css 1h97cat">.css-1h97cat{width:100%;max-width:calc(75% - 64px);padding-right:64px;}@media (max-width: 1200px){.css-1h97cat{max-width:100%;padding-right:0;-webkit-order:3;-ms-flex-order:3;order:3;}}.css-1h97cat h1,.css-1h97cat h2,.css-1h97cat h3,.css-1h97cat h4,.css-1h97cat h5,.css-1h97cat h6{overflow-wrap:break-word;}</style><div class="css-1h97cat e1htbcji0"><style data-emotion="css 1fdmakl">@media (max-width: 1200px){.css-1fdmakl{display:none;}}</style><h1 class="css-1fdmakl">执行机制</h1><h3 id="概述" style="position:relative"><a href="#%E6%A6%82%E8%BF%B0" aria-label="概述 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h3><hr/><p>本章主要围绕可执行上下文进行阐述，它确定了变量的作用域，即作用范围。</p><p>本章主要围绕可执行上下文进行阐述，它确定了变量的作用域，即作用范围。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614605790279-8cc1f01a-aa8c-4333-85f6-a8ba84171a83.png#align=left&amp;display=inline&amp;height=300&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=300&amp;originWidth=423&amp;size=17807&amp;status=done&amp;style=none&amp;width=423" alt="image.png"/></p><h3 id="变量提升" style="position:relative"><a href="#%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87" aria-label="变量提升 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>变量提升</h3><hr/><p><strong>变量提升（Hoisting）</strong>和 JavaScript 底层机制是密不可分的，我们通过以下代码进行说明：</p><div class="gatsby-highlight"><style data-emotion="css snec3t">.css-snec3t{text-align:left;padding:2rem 1rem 1rem 1rem;overflow:auto;white-space:pre;word-spacing:normal;word-break:normal;border-radius:5px;-webkit-overflow-scrolling:touch;overflow-wrap:break-word;box-shadow:1px 1px 20px rgba(20, 20, 20, 0.27);}.css-snec3t code{float:left;min-width:100%;padding-right:1rem;}.css-snec3t .token-line{line-height:22px;font-size:14px;min-width:100%;}.css-snec3t .highlight-line{background-color:#44475a;margin-left:-1rem;margin-right:-2rem;padding:0 0.75rem;border-left:4px solid #1f3696;}</style><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><style data-emotion="css 1waw5l1">.css-1waw5l1{position:absolute;top:0;right:0;z-index:1;border-radius:0 5px 0 5px;padding:0.25rem 0.6rem;border:none;cursor:pointer;background:#44475a;color:rgb(248, 248, 242);-webkit-transition:all 200ms ease;transition:all 200ms ease;font-size:12px;}.css-1waw5l1:disabled{cursor:not-allowed;}.css-1waw5l1:not(:disabled):hover,.css-1waw5l1:not(:disabled):focus{background:#1f3696;}</style><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;xiaoming&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></pre></div><p><strong>如果按照顺序执行的思路来说，</strong></p><ul><li>执行第一行 <code class="inline-code">sayHi</code> 时，函数还未被声明，应该会报错。</li><li>执行第二行 <code class="inline-code">name</code> 时，<code class="inline-code">name</code> 变量也未被声明，也应该会报错。</li></ul><p><strong>但是运行之后的结果是：</strong></p><ul><li><code class="inline-code">hello</code></li><li><code class="inline-code">undefined</code></li></ul><style data-emotion="css 2wndv7">.css-2wndv7{font-weight:bold;color:#ff4d4f;margin-bottom:20px;}</style><div class="css-2wndv7">-------------------------- 😲 Waring -------------------------------</div><ul><li><p>🤔<strong> 为什么会发生这种未声明就可以调用的现象？</strong></p><ul><li><p><strong>【根源】JavaScript 引擎将代码的声明和幅值拆成两个部分处理。</strong></p><ul><li>【🖥】️例如变量 <code class="inline-code">var name = &#x27;xiaoming&#x27;</code><ul><li>先声明，<code class="inline-code">var name = undefined</code></li><li>再幅值，<code class="inline-code">name = &#x27;xiaoming&#x27;</code></li></ul></li><li>如果是函数，将在执行代码前，就已经完成声明。</li></ul></li></ul></li></ul><ul><li><strong>【变量提升】JavaScript 引擎将变量和函数的声明提升至最前端。</strong></li><li>注意是 <code class="inline-code">var</code> 声明的变量，<code class="inline-code">let</code> 和 <code class="inline-code">const</code> 属于块作用域不适用于这个规则。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614581046093-0be49d2e-893c-4d7d-bae2-5f1729bd9d6b.png#align=left&amp;display=inline&amp;height=212&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=212&amp;originWidth=599&amp;size=15754&amp;status=done&amp;style=none&amp;width=599" alt="image.png"/></p><ul><li>✋ <strong>提问，以下代码是什么输出结果？</strong></li></ul><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></pre></div><ul><li>结果为 <code class="inline-code">undefined</code> ，因为 <code class="inline-code">sayHi</code> 是变量。</li></ul><ul><li><p>🤔<strong> 如果从JavaScript 引擎角度看，变量提升是怎么实现的？</strong></p><ul><li><p>变量提升只是一种形象化的表述，并不会真的在物理层将代码移至前端。</p></li><li><p>所谓提升只是<strong>执行顺序</strong>的提升：</p><ul><li><strong>声明阶段对应引擎的编译阶段</strong>，负责将变量放入至内存，相当于环境搭建。</li><li><strong>幅值阶段对应引擎的执行阶段</strong>，负责利用内存中的数据，进行代码操作。</li></ul></li><li><p>接下来就以 <strong>代码 -&gt; 编译 -&gt; 执行</strong> 的顺序进行阐述。</p></li><li><p><strong>编译阶段</strong>：准备执行的环境。</p></li><li><p>首先，引擎会创建<strong>【执行上下文】</strong>，作为<strong>代码的运行环境</strong>。</p></li><li><p>遇到 全局作用域，函数作用域以及 <code class="inline-code">eval</code> 都会创建新的执行上下文。</p></li><li><p>然后，所有声明的变量和函数会被存到<strong>【变量环境 Variable Environment】。</strong></p></li><li><p>最后，将声明以外的代码编译为字节码。</p></li><li><p><strong>执行阶段</strong>：向执行上下文中寻找要求的变量。（由于执行上下文还有其他没介绍，先略过）</p></li></ul></li></ul><ul><li>✋ <strong>提问，重复声明该如何处理？</strong></li></ul><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sayHi</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;hi&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></pre></div><ul><li><p>后面的会覆盖前面的，所以是 <code class="inline-code">hi</code> 。</p></li><li><p>😏 <strong>总的来说，变量提升是 JavaScript 引擎中先编译后执行导致的。</strong></p><ul><li>首先，在内存中创建执行上下文，提供代码运行的空间。</li><li>然后，编译环节会先将所有函数和变量（<code class="inline-code">var</code> 声明的）放至变量环境中。</li><li>最后，引擎再根据执行上下文，对代码进行执行。</li></ul></li></ul><h3 id="调用栈" style="position:relative"><a href="#%E8%B0%83%E7%94%A8%E6%A0%88" aria-label="调用栈 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>调用栈</h3><hr/><p>由上文可知，JavaScript 引擎会创建执行上下文，为代码执行提供条件。</p><ul><li><p>🤔<strong> 什么样的代码可以被分配一个执行上下文？</strong></p><ul><li>有独立作用域的代码块。</li><li><strong>全局代码</strong>，会被自动分配一个全局执行上下文。</li><li><strong>调用函数</strong>，会分配一个函数作用域，在函数执行完后被销毁。</li><li><strong>eval 函数</strong>，少用。</li></ul></li></ul><ul><li>🤔<strong> 全局执行上下文中，肯定会有几个函数，所以两者是怎么嵌套的？</strong></li></ul><ul><li><p><strong>借助栈结构，即调用栈，又称执行上下文栈。</strong></p><ul><li>开局先压入一个全局执行上下文。</li><li>执行到函数的时候，创建函数作用域，再压入调用栈。</li></ul></li><li><p>✋<strong>以下代码的栈结构是什么样子的？</strong></p></li></ul><p>**</p><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token parameter">b</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> c</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> b</span><span class="token operator">+</span><span class="token plain">c </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add3</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token parameter">b</span><span class="token parameter punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token parameter"> c</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> d </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  res </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">add2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> res </span><span class="token operator">+</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">add3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></div></code></pre></div><ul><li><strong>创建全局上下文，将其压入栈底。</strong></li><li>先编译全局的变量声明，然后开始执行代码。</li><li>执行第一行时，给变量 <code class="inline-code">a</code> 幅值。</li></ul><p>        <img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614588371505-0c5b668c-17d6-4f51-8541-2e9e58c0f327.png#align=left&amp;display=inline&amp;height=241&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=241&amp;originWidth=671&amp;size=20794&amp;status=done&amp;style=none&amp;width=671" alt="image.png"/></p><ul><li><strong>调用 <code class="inline-code">add3</code> ，创建执行上下文，将其压入栈中。</strong></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614588704598-9fe8bdc3-e397-42c0-8633-16a04098aab2.png#align=left&amp;display=inline&amp;height=364&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=364&amp;originWidth=668&amp;size=35620&amp;status=done&amp;style=none&amp;width=668" alt="image.png"/></p><ul><li><strong>调用 <code class="inline-code">add2</code>，创建执行上下文，将其压入栈中。</strong></li><li>由于直接返回两者加和，执行完立即销毁作用域。</li><li><code class="inline-code">add3</code> 执行上下文中的 <code class="inline-code">res</code> 变量得到值。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614588905948-46a58a37-72b7-4164-8a7f-c8fd94571890.png#align=left&amp;display=inline&amp;height=372&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=372&amp;originWidth=672&amp;size=37190&amp;status=done&amp;style=none&amp;width=672" alt="image.png"/></p><ul><li><code class="inline-code">add3</code> 执行完毕，销毁其作用域。</li><li>全局代码执行完毕，全局作用域销毁，代码执行完毕。</li></ul><ul><li>😏 <strong>总的来说，执行上下文通过调用栈管理，并与函数的调用息息相关。</strong></li><li>除了一开始会创建的全局执行上下文，其他的执行上下文与函数有直接关系。</li><li>所以可以通过跟踪执行上下文，追踪函数的调用 <code class="inline-code">console.trace()</code>。</li></ul><h3 id="作用域链与闭包" style="position:relative"><a href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E4%B8%8E%E9%97%AD%E5%8C%85" aria-label="作用域链与闭包 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>作用域链与闭包</h3><hr/><p>由上可见，执行上下文是通过栈的方式进行存储的，那当我们调用了一个当前上下文不存在的变量时，我们是直接报错，还是去其他执行上下文中寻找？</p><p>我们通过以下的代码辅助理解：</p><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sayName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> name </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">fun</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;xiaohuang&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">sayName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;xiaoming&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">fun</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></pre></div><p><strong>如果按照执行上下文上下位置的思路来说，</strong></p><ul><li>先执行函数 <code class="inline-code">fun</code> ，创建执行上下文，内部创建了 <code class="inline-code">name</code> 变量。</li><li>然后再执行 sayName 函数，在 <code class="inline-code">fun </code>上下文之上创建新的上下文，其中调用的<code class="inline-code">name</code>变量应该来自 <code class="inline-code">fun</code> 上下文。</li></ul><p><strong>但是运行之后的结果是：</strong></p><ul><li><code class="inline-code">xiaoming</code></li><li>🤔<strong> 这是为什么？</strong></li></ul><p>**</p><ul><li><strong>JavaScript 采用的是静态作用域，它的上下文关系是创建的时候确定的</strong>。</li><li>如上例， <code class="inline-code">fun</code>和 <code class="inline-code">sayName</code>都是在全局变量中创建的，所以外层的作用域指向全局。</li></ul><ul><li><strong>这个静态外部执行上下文，被存在 outer 变量里</strong>。</li><li><strong>如果代码中引用了当前上下文中没有的变量，会顺着outer 查找，这个查找链就是作用域链</strong>。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614592519023-82b2b24f-c905-4c1a-9a41-9d7d9a68cb3c.png#align=left&amp;display=inline&amp;height=371&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=371&amp;originWidth=524&amp;size=25101&amp;status=done&amp;style=none&amp;width=524" alt="image.png"/></p><ul><li>🤔<strong> 那如果函数作为输出传出来，而 outer 指向上下文被销毁了怎么办？</strong></li></ul><p>**</p><ul><li><strong>这个就是闭包，它会将其父执行上下文封装为一个独特的 <code class="inline-code">closure</code> 对象，存在内存中</strong>。</li><li>如果在函数 <code class="inline-code">outside</code> 里定义了函数 <code class="inline-code">inside</code> ，根据静态作用域特性，<code class="inline-code">inside</code>执行上下文的 outer 应该指向 <code class="inline-code">outside</code>。</li><li>如果将函数 <code class="inline-code">inside</code> return 出来，此时 <code class="inline-code">outside</code>理应被销毁，但是有指向它的函数，所以会被封装为 <code class="inline-code">closure</code> 对象，储存在内存中。</li><li>于是 <code class="inline-code">outside</code> 函数成为 <code class="inline-code">inside</code>函数的专属闭包，只有 <code class="inline-code">inside</code>能从 outer 引用调用到 <code class="inline-code">outside</code>的属性。</li></ul><p>我们通过一个例子理解一下</p><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">foo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xiaoming&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> age </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">18</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> innerBar </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">getName</span><span class="token operator">:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> name</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function-variable function" style="color:rgb(80, 250, 123)">setName</span><span class="token operator">:</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token parameter">newName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      name </span><span class="token operator">=</span><span class="token plain"> newName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> innerBar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> bar </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">foo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">bar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">setName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xiaohuang&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">bar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">getName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></code></pre></div><ul><li>左图为 <code class="inline-code">foo</code> 函数中执行 <code class="inline-code">return innerBar</code> 时的调用栈。</li><li>右图为执行完 <code class="inline-code">return innerBar</code> 后的调用栈。</li><li>此时，<code class="inline-code">foo</code> 执行上下文应该被销毁，但是返回出的 <code class="inline-code">innerBar</code> 中的两个函数，都会访问 <code class="inline-code">name</code> 变量。</li><li>所以 <code class="inline-code">name</code> 变量会以 <code class="inline-code">closure</code> 对象的状态留在内存中，只为 <code class="inline-code">getName</code> 和 <code class="inline-code">setName</code> 提供数值。</li></ul><p>        <img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614599710205-669a721b-730d-4c00-8e33-d5710737befe.png#align=left&amp;display=inline&amp;height=318&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=318&amp;originWidth=643&amp;size=30010&amp;status=done&amp;style=none&amp;width=643" alt="image.png"/></p><ul><li>当我们调用 <code class="inline-code">bar.setName(&#x27;xiaoming&#x27;);</code>，调用栈如下图所示。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614600591391-852c6248-8139-4763-b6ec-1c3211973381.png#align=left&amp;display=inline&amp;height=345&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=345&amp;originWidth=368&amp;size=16698&amp;status=done&amp;style=none&amp;width=368" alt="image.png"/></p><ul><li>😏 <strong>总的来说，执行上下文之间的调用链是写代码的时候就确定的，这是静态作用域的结构。</strong></li></ul><h3 id="块级作用域" style="position:relative"><a href="#%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F" aria-label="块级作用域 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>块级作用域</h3><hr/><p>在 ES6 之前，变量都是通过 <code class="inline-code">var</code> 声明的，但是其存在变量提升的问题</p><ul><li>🤔<strong> 变量提升会引起什么问题？</strong></li></ul><p>**</p><ul><li><strong>变量会在不经意之间被覆盖</strong>。</li><li>由于 <code class="inline-code">var</code> 可以穿透大括号，有一些未被执行的 <code class="inline-code">if</code> 条件句中的声明可能会生效。<ul><li><strong>本应该销毁的变量，没有被销毁</strong>。</li></ul></li><li>所有变量只会在执行上下文结束时，才会被销毁。</li></ul><p><a href="https://emojipedia.org/desktop-computer/" target="_blank" rel="nofollow noopener noreferrer">🖥️</a> 用以下两个例子说明这个问题：</p><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;xiaoming&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sayName</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;xiaohuang&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sayName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// undefined undefined</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// 2</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">// 10</span></div></code></pre></div><ul><li>🤔<strong> 所以如何解决这些问题？</strong></li></ul><p>**</p><ul><li><strong>将作用域的颗粒度缩小，将大括号看成分界的标志（块级作用域）</strong>。</li></ul><ul><li>我们用 <code class="inline-code">let</code>和 <code class="inline-code">const</code> 两个关键词声明块级作用域中变量。</li><li><strong>作用域块内声明的变量不影响块外面的变量</strong>，外部也无法访问内部。</li><li><strong>变量的查找顺序是由内向外查找</strong>。</li></ul><ul><li>在执行上下文中，JavaScript引擎将<strong>块级变量存在词法环境中</strong>。</li><li>如果一个大括号中有 <code class="inline-code">let</code>和 <code class="inline-code">const</code> 关键词，都将会在词法环境中创建一个作用域块。</li><li>词法环境内部本质上维护了一个栈结构，从上到下对应代码中从从里到外。</li></ul><p><a href="https://emojipedia.org/desktop-computer/" target="_blank" rel="nofollow noopener noreferrer">🖥️</a> 用以下例子说明块级作用域：</p><div class="gatsby-highlight"><pre class="prism-code language-javascript css-snec3t e1g560me7" style="color:#F8F8F2;background-color:#282A36"><button class="css-1waw5l1 e1g560me0">Copy</button><code><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">foo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> b </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> b </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> c </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> d </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">d</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">foo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></div></code></pre></div><ul><li><strong>在编译阶段完成后，调用栈如下图所示。</strong></li><li>首先，所有的 <code class="inline-code">var</code> 声明不受大括号的限制，将会被先存入变量环境中。</li><li>然后，在 <code class="inline-code">foo</code> 函数作用域中，只有 b 是在该作用域声明的块级变量，所以在词法环境中被声明。</li><li>其他的块级变量，因为在大括号中，外部对内部不可视，导致不会被编译。<img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614604512371-9eb7d82f-1eb2-41f5-97cf-a5c875cd51ca.png#align=left&amp;display=inline&amp;height=340&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=340&amp;originWidth=330&amp;size=11863&amp;status=done&amp;style=none&amp;width=330" alt="image.png"/><ul><li><strong>当代码执行到大括号时，调用栈如下图所示。</strong></li></ul></li><li>此前，<code class="inline-code">a</code> 和 <code class="inline-code">b</code> 被赋值。</li><li>当执行到大括号时，首先会编译大括号中的所有变量。</li></ul><p><strong><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614604799929-736b0e14-6c8b-49e8-a0ed-bd4441e34971.png#align=left&amp;display=inline&amp;height=344&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=344&amp;originWidth=328&amp;size=13530&amp;status=done&amp;style=none&amp;width=328" alt="image.png"/></strong></p><ul><li><strong>当代码执行到 </strong><code class="inline-code">**console**</code><strong> 时，调用栈如下图所示。</strong></li></ul><p><strong><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614605121450-d7866c30-47fc-4da4-abed-517605fcc305.png#align=left&amp;display=inline&amp;height=449&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=449&amp;originWidth=456&amp;size=23220&amp;status=done&amp;style=none&amp;width=456" alt="image.png"/></strong></p><ul><li><strong>当代码执行到大括号外部的  <code class="inline-code">console</code> 时，调用栈如下图所示。</strong></li><li>大括号里的块作用域被销毁。</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/8415624/1614605319940-7733f84e-c21f-4fdc-b156-73956805830e.png#align=left&amp;display=inline&amp;height=452&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=452&amp;originWidth=435&amp;size=20687&amp;status=done&amp;style=none&amp;width=435" alt="image.png"/></p><ul><li>最终结果 1 3 2 4 d报错</li></ul><style data-emotion="css 1vvt293">.css-1vvt293{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-text-decoration:none;text-decoration:none;margin-top:48px;color:#6C6C80;opacity:0.8;font-size:14px;font-weight:normal;}</style><a href="https://github.com/jeyao/tree/main/docs/src/docs/javascript/3.2.2.mdx" target="_blank" rel="noopener noreferrer" class="css-1vvt293"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" style="margin-right:5px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path></svg>Edit this page on <!-- -->GitHub</a><style data-emotion="css ns1hxi">.css-ns1hxi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:48px 0;width:100%;}@media (max-width: 780px){.css-ns1hxi{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><section class="css-ns1hxi e1u95h3o1"><style data-emotion="css 94m8q6">.css-94m8q6{-webkit-transition:all 200ms;transition:all 200ms;}.css-94m8q6 a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}.css-94m8q6 a svg{width:25px;height:25px;color:#6C6C80;margin-right:16px;}.css-94m8q6 a p{letter-spacing:0.142em;text-transform:uppercase;font-size:12px;margin:0;color:#6C6C80;}.css-94m8q6 a h3{color:#6C6C80;border:none;margin:0;padding:0;font-size:16px;}.css-94m8q6:hover{opacity:0.8;}.css-94m8q6:hover a svg{opacity:0.8;}@media (max-width: 780px){.css-94m8q6{width:100%;margin-bottom:16px;}.css-94m8q6 a{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}}</style><div class="css-94m8q6 e1u95h3o0"><a href="/getting-started"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"></path></svg><div><p>Prev</p><h3>Getting started</h3></div></a></div><style data-emotion="css 10sjsqn">.css-10sjsqn{-webkit-transition:all 200ms;transition:all 200ms;margin-left:auto;}.css-10sjsqn a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-text-decoration:none;text-decoration:none;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;}.css-10sjsqn a svg{width:25px;height:25px;color:#6C6C80;margin-left:16px;}.css-10sjsqn a p{letter-spacing:0.142em;text-transform:uppercase;font-size:12px;margin:0;color:#6C6C80;}.css-10sjsqn a h3{color:#6C6C80;border:none;margin:0;padding:0;font-size:16px;}.css-10sjsqn:hover{opacity:0.8;}.css-10sjsqn:hover a svg{opacity:0.8;}@media (max-width: 780px){.css-10sjsqn{width:100%;}.css-10sjsqn a{-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}}</style><div class="css-10sjsqn e1u95h3o0"><a href="/network/http"><div><p>Next</p><h3>HTTP</h3></div><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></a></div></section></div><style data-emotion="css 106zi9a">.css-106zi9a{position:-webkit-sticky;position:sticky;top:0;-webkit-order:2;-ms-flex-order:2;order:2;padding-top:72px;max-height:calc(100vh - 72px);overflow-y:auto;overflow-x:hidden;width:100%;max-width:200px;}@media (max-width: 1200px){.css-106zi9a{position:relative;top:auto;-webkit-order:0;-ms-flex-order:0;order:0;max-width:100%;margin-left:0;padding-top:0;}}</style><div class="css-106zi9a eq8hw471"><style data-emotion="css 1gnn5iw">.css-1gnn5iw h2{text-transform:uppercase;font-size:14px;font-weight:bold;letter-spacing:0.142em;margin-top:0rem;border:none;margin:0 0 16px 0;}.css-1gnn5iw nav ul{padding-left:0;margin-bottom:0;list-style:none;}.css-1gnn5iw nav ul li{margin-bottom:12px;line-height:1.1;}.css-1gnn5iw nav ul li a{font-size:14px;font-weight:400;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 0.2s;transition:all 0.2s;overflow-wrap:break-word;}.css-1gnn5iw nav ul li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}@media (max-width: 1200px){.css-1gnn5iw{margin:0 0 24px 0;padding-bottom:16px;border-bottom:1px solid rgba(120, 117, 122, 0.2);}}</style><div class="css-1gnn5iw eq8hw470"><h2>On this page</h2><nav><ul><li style="margin-left:8px"><a href="#" style="color:#6C6C80">概述</a></li><li style="margin-left:8px"><a href="#" style="color:#6C6C80">变量提升</a></li><li style="margin-left:8px"><a href="#" style="color:#6C6C80">调用栈</a></li><li style="margin-left:8px"><a href="#" style="color:#6C6C80">作用域链与闭包</a></li><li style="margin-left:8px"><a href="#" style="color:#6C6C80">块级作用域</a></li></ul></nav></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/javascript/3.2.2";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-9cdf87ac7248f4b5f755.js"],"app":["/app-3153cd67d4679d599a55.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-891f28db69e52dc95827.js"],"component---src-pages-404-js":["/component---src-pages-404-js-ae3e46cc9e78a425fdb8.js"],"component---src-rocketseat-gatsby-theme-docs-src-templates-docs-query-js":["/component---src-rocketseat-gatsby-theme-docs-src-templates-docs-query-js-9e19f2e69b8483d46188.js"],"component---src-rocketseat-gatsby-theme-docs-src-templates-homepage-query-js":["/component---src-rocketseat-gatsby-theme-docs-src-templates-homepage-query-js-86ae63d5f9f7811e47d5.js"]};/*]]>*/</script><script src="/polyfill-9cdf87ac7248f4b5f755.js" nomodule=""></script><script src="/component---src-rocketseat-gatsby-theme-docs-src-templates-docs-query-js-9e19f2e69b8483d46188.js" async=""></script><script src="/64753c22875cf8b50a9c00a4cbb49dfbc7a8c3a5-0ab51f5a35b269095259.js" async=""></script><script src="/252f366e-88caabdff774f0c0c5b6.js" async=""></script><script src="/5e2a4920-916101dd0dfe523ee6cd.js" async=""></script><script src="/545f34e4-9f9d949bc827879538f9.js" async=""></script><script src="/app-3153cd67d4679d599a55.js" async=""></script><script src="/f0e45107-dddf2e792ec5c6c002bc.js" async=""></script><script src="/framework-c1a99f3506abef01adf7.js" async=""></script><script src="/webpack-runtime-f9dca12a9ff602ea9ded.js" async=""></script></body></html>